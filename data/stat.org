#+STARTUP: content
#+PROPERTY: header-args:python :session *PAC-SW Notebook*

* Init
#+begin_src python :results none
  import pandas as pd
  from os import path

  from data import *

  freq = 2.5e9
  res = 'tacle-bench/aarch64'
  build = path.join(res, "build.csv")

  pac = Measurement(path.join(res, "pac.csv"))
  nopac= Measurement(path.join(res, "nopac.csv"))

  b = Build(build)
  m = Analysis(nopac, pac, b)
#+end_src

* Functions
#+begin_src python :results value raw
  pd2org(b.df)
#+end_src

* Raw
** PA enabled
#+begin_src python :results value raw
  pd2org(pac.df)
#+end_src


** PA disabled
#+begin_src python :results value raw
  pd2org(nopac.df)
#+end_src

* Relative
#+begin_src python :results none
  pac_rel = pac.relative()
  nopac_rel = nopac.relative()
#+end_src

** PA enabled
#+begin_src python :results value raw
  pd2org(pac_rel)
#+end_src

#+begin_src python :results output
  print('Mean: {} %'.format(pac_rel['rstd'].mean() * 100))
  print('Min: {} %'.format(pac_rel['rstd'].min() * 100))
  print('Max: {} %'.format(pac_rel['rstd'].max() * 100))
#+end_src

** PA disabled
#+begin_src python :results value raw
  pd2org(nopac_rel)
#+end_src

#+begin_src python :results output
  print('Mean: {} %'.format(nopac_rel['rstd'].mean() * 100))
  print('Min: {} %'.format(nopac_rel['rstd'].min() * 100))
  print('Max: {} %'.format(nopac_rel['rstd'].max() * 100))
#+end_src

* Overhead
#+begin_src python :results value raw
  oh = m.overhead()
  aut_s = m.aut_per_sec()

  pd2org(pd.concat([oh, aut_s, b.df], axis=1))
#+end_src

* Authentication cost
#+begin_src python :results value raw
  cost = m.cycles(freq)
  
  pd2org(cost)
#+end_src
